<!DOCTYPE html>
<html>
<head>
<title>Combined Timer</title>
<style>
    body {
        font-family: 'Roboto', sans-serif; /* Modern font */
        text-align: center;
        margin-top: 50px;
        background-color: #f4f4f4; /* Light gray background */
        color: #333; /* Dark gray text */
      }
      
      #timer-container {
        background-color: #fff;
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0px 5px 15px rgba(0, 0, 0, 0.15); /* Softer, more pronounced shadow */
        margin: 0 auto;
        width: 350px; /* Slightly wider */
      }
      
      h1 {
        color: #2c3e50; /* Darker heading color */
        margin-bottom: 20px;
      }
      
      #timer {
        font-size: 56px; /* Larger timer display */
        font-weight: 500;
        margin-bottom: 20px;
        color: #3498db; /* Blue timer color */
      }
      
      #controls button, #time-input, #timerType {
        font-size: 18px;
        margin: 10px;
        padding: 10px 20px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        transition: background-color 0.3s ease, transform 0.2s ease; /* Smooth hover effect */
      }
      
      #controls button {
        background-color: #3498db; /* Blue buttons */
        color: white;
      }
      
      #controls button:hover {
        background-color: #2980b9; /* Darker blue on hover */
        transform: scale(1.05); /* Slight scale on hover */
      }
      
      #time-input, #timerType {
        border: 1px solid #ddd; /* Light gray border */
        padding: 10px;
        border-radius: 8px;
        background-color: white;
      }
      #time-input:focus {
          outline: none;
          border-color: #3498db; /* Highlight border on focus */
          box-shadow: 0 0 5px rgba(52, 152, 219, 0.3); /* Subtle blue glow */
      }
      
      #time-input-container {
        margin-bottom: 20px;
      }
      
      /* Pastel color palette (subtle) */
      .pastel-light {
        background-color: #dd8519; /* Very light beige */
      }
      .pastel-mid {
        background-color: #520ebe; /* Slightly darker beige */
      }
      .pastel-dark {
        background-color: #bb13b3; /* Even darker beige */
      }
      
      /* Success message styling */
      .success-message {
        color: #27ae60; /* Green */
        font-size: 20px;
        margin-top: 20px;
      }
</style>
</head>
<body>

<div id="timer-container" class="pastel-light">
    <h1>Timer</h1>

    <select id="timerType">
        <option value="pomodoro">Pomodoro</option>
        <option value="basic">Basic</option>
    </select>

    <div id="time-input-container">
        <label for="time-input">Enter Time (mm:ss):</label>
        <input type="text" id="time-input" value="00:00">
    </div>

    <div id="timer">25:00</div>
    <div id="controls">
        <button id="start">Start</button>
        <button id="pause">Pause</button>
        <button id="reset">Reset</button>
    </div>
</div>


<script>
let startTime = 25 * 60;
let timerInterval;
let isWorking = true;
let currentTimerType = "pomodoro";
const WORK_DURATION = 25 * 60; // Pomodoro work duration in seconds
const BREAK_DURATION = 5 * 60;  // Pomodoro break duration in seconds

const timerDisplay = document.getElementById('timer');
const startButton = document.getElementById('start');
const pauseButton = document.getElementById('pause');
const resetButton = document.getElementById('reset');
const timerTypeSelect = document.getElementById('timerType');
const timeInput = document.getElementById('time-input');
const timeInputContainer = document.getElementById('time-input-container');
const timerContainer = document.getElementById('timer-container');

function updateDisplay() {
  const minutes = Math.floor(startTime / 60);
  const seconds = startTime % 60;
  timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

  // Color change logic (adjust thresholds as needed)
  const totalTime = currentTimerType === "pomodoro" ? (isWorking ? 25 * 60 : 5 * 60) : (startTime + (minutes * 60 + seconds)); // Total time for calculation
  const remainingPercentage = (startTime / totalTime) * 100;

  if (remainingPercentage > 66) {
      timerContainer.className = "pastel-light";
  } else if (remainingPercentage > 33) {
      timerContainer.className = "pastel-mid";
  } else {
      timerContainer.className = "pastel-dark";
  }
}

function startTimer() {
    if (!timerInterval) {
        timerInterval = setInterval(() => {
            startTime--;
            updateDisplay();

            if (currentTimerType === "basic") {
                if (startTime < 0) {
                    clearInterval(timerInterval);
                    alert("Timer Finished!");
                    timerContainer.className = "pastel-light"; // Reset color
                    startTime = 0;
                    updateDisplay();
                    return;
                }
            } else if (currentTimerType === "pomodoro") {
                if (startTime < 0) {
                    clearInterval(timerInterval);
                    isWorking = !isWorking;
                    startTime = isWorking ? 25 * 60 : 5 * 60;
                    updateDisplay();
                    alert(isWorking ? "Work time started!" : "Break time started!");
                    startTimer();
                }
            }
        }, 1000);
    }
}


function pauseTimer() {
  clearInterval(timerInterval);
  timerInterval = null;
}

function resetTimer() {
  clearInterval(timerInterval);
  timerInterval = null;
  timerContainer.className = "pastel-light"; // Reset color
  if (currentTimerType === "pomodoro") {
    startTime = 25 * 60;
  } else {
    const timeInputValue = timeInput.value;
    const [minutes, seconds] = timeInputValue.split(':').map(Number);
    startTime = minutes * 60 + seconds;
    if (isNaN(startTime) || startTime < 0) {
        alert("Invalid time input. Please use the format mm:ss.");
        startTime = 0;
    }
  }
  updateDisplay();
}

timerTypeSelect.addEventListener('change', () => {
  currentTimerType = timerTypeSelect.value;
  if (currentTimerType === "basic") {
      timeInputContainer.style.display = "block";
      startTime = 0;
  } else {
      timeInputContainer.style.display = "none";
      startTime = 25 * 60;
  }
  resetTimer();
});

timeInput.addEventListener('change', () => {
    if (currentTimerType === "basic") {
        resetTimer();
    }
});

startButton.addEventListener('click', startTimer);
pauseButton.addEventListener('click', pauseTimer);
resetButton.addEventListener('click', resetTimer);

updateDisplay();
timeInputContainer.style.display = "none";

</script>

</body>
</html>